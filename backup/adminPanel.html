<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>FilmBit Admin Panel</title>
  <script src="./script/jquery-3.6.0.min.js"></script>

  <script src="./script/chart.js"></script>
  
  <script src="./script/jquery.dataTables.min.js"></script>
  <script src="./script/bootstrap.bundle.min.js"></script>


  <link href="./css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="./css/jquery.dataTables.min.css">
  <link rel="stylesheet" href="./css/adminPanel.css">

<script>  

    var baseUrlApi = 'http://localhost:8090';
	var readMovieUrl = baseUrlApi + "/movie/datatable";
    var readMovieStatusUrl = baseUrlApi + "/movie-status/allstatus";
    var readMovieTypeUrl = baseUrlApi + "/movie-types/alltypes";
	var readMovLanguageUrl = baseUrlApi + "/languages/alllangugage";
	var readMovSummaryByIdURl = baseUrlApi + "/movie/moviebyId?id=";
	var readActorsBylanIdUrl = baseUrlApi +"/movie-person/movie_by_languagae?id=";
	var readMovieRolesUrl = baseUrlApi + "/roles-in-movie/getAllRole";
	var addMovieRoleUrl   =   baseUrlApi + "/roles-in-movie/addRoleInMovie"
	var addMovieUrl =  baseUrlApi + "/movie/addMovie"
	var readActorInMovByMovIdUrl = baseUrlApi  + "/actors-in-movie/actorsInMovieById?id=";
	var addActorInMovieUrl = baseUrlApi  + "/actors-in-movie/addMovieActor";
    var deleteActorInMovieUrl = baseUrlApi  + "/actors-in-movie/deleteMoviePlay?id=";
	var readShareTypeByMovIdUrl = baseUrlApi  + "/share-types/movie/" ;
	var addUpdateShareTypeUrl = baseUrlApi + "/share-types/updateInsert/";
	var deleteShareTypeUrl = baseUrlApi + "/share-types/deleteShareType/";
	var readMovieEintyByMovIdUrl = baseUrlApi + "/movie/entity/moviebyId?id=";
    var dataTablePromotionTypeUrl = baseUrlApi  + "/promotion-types/page";
	var readPromoByIdUrl =  baseUrlApi  + "/promotion-types/promotionType/";
    var upateInsertPromoTypeUrl =  baseUrlApi  + "/promotion-types/insertUpdate";
    var deletePromoByIdUrl   = baseUrlApi + "/promotion-types/deleteBromoType/";
	var readAllPromoTypeUrl = baseUrlApi  + "/promotion-types/findAll";
	var dataTableRewardUrl =  baseUrlApi  + "/reward-types/page";
    var insertRewardTypeUrl = baseUrlApi  + "/reward-types/insert";
    var readRewardByIdUrl = baseUrlApi  + "/reward-types/rewards/";
	var updateRewardUrl = baseUrlApi  + "/reward-types/update/";
    var deleteRewardByIdUrl =  baseUrlApi +"/reward-types/delete/";
	var dataTableOfferTypeUrl = baseUrlApi + "/offertypes/paged"
	var insertOfferTypeUrl = baseUrlApi  + "/offertypes/insert";
    var readOfferTypeByIdUrl = baseUrlApi  + "/offertypes/type/";
    var updateOfferTypeByIdUrl = baseUrlApi  + "/offertypes/update/";
	var deleteOfferTypeByIdUrl = baseUrlApi  + "/offertypes/delete/";
	var dataTableOfferUrl = baseUrlApi + "/offers/paged"
    var insertOfferUrl = baseUrlApi  + "/offers/insert";
	var readOfferByIdUrl = baseUrlApi  + "/offers/offerId/";
    var updateOfferByIdUrl = baseUrlApi  + "/offers/update/";
    var deleteOfferByIdUrl = baseUrlApi  + "/offers/delete/";
	var readAllOfferUrl = baseUrlApi  + "/offers/all";
    var readMovieBylangIdUrl = baseUrlApi + "/movie/language/"
    var readMovieOfferBymovIdUrl =  baseUrlApi   + "/offers/movieOffer/";
    var insertMovieShareOfferUrl = baseUrlApi   + "/offer-mappings/saveMovieShareOffer";
    var readMovieShareOfferByOfferIdUrl = baseUrlApi   + "/offer-mappings/readShareOffer/";
    var updateMovieShareOfferUrl = baseUrlApi   + "/offer-mappings/update/";
    var deleteMovieShareOfferUrl = baseUrlApi   + "/offer-mappings/delete/";
    var dataTablePromoCodeUrl = baseUrlApi + "/pron         mo-codes/page"
	var readRewardByTypeIdUrl =  baseUrlApi +"/reward-types/rewardsbytype/";
    var inserrPromotionCodesUrl = baseUrlApi + "/promo-codes/create"
    var dataTablePromoRewardMapUrl =  baseUrlApi +  "/promotion-rewards-map/page/"
	var deleteRewardMapUrl = baseUrlApi   + "/promotion-rewards-map/delete/";
    var insertPromoCodeUrl = baseUrlApi   + "/promo-codes/createPromoCode";
	var updatePromoCodeUrl = baseUrlApi   + "/promo-codes/updatePromoCode";
    var deletePromoUrl =  baseUrlApi +  "/promo-codes/delete/"
    var dataTableUserInvestUrl =  baseUrlApi +  "/movieInvest/dataTableUserInvestment"
	var readInvestShareBymovIdUrl =  baseUrlApi +  "/movieInvest/readInvestbymovie/"
    var saveInvestStatusChangeUrl = baseUrlApi +  "/movieInvest/udpateStatus"
	var dataTableUserPayoutUrl =  baseUrlApi +  "/payout/dataTableUserPayout"
    var readInvestShareByShareIdUrl =  baseUrlApi +  "/movieInvest/readInvestbymoviebyshareId/"
    var readPayoutByuserIdAndMovIdUrl = baseUrlApi +  "/payout/readPayoutByUserIdAndMovieId/"
    var repayAlLreturnforMovieUrl = baseUrlApi +  "/payout/repayAlLreturnforMovie"
	var repayAlLreturnforShareUrl = baseUrlApi +  "/payout/repayAlLreturnforShare"
    var repayAllInvestedforShareUrl = baseUrlApi +  "/movieInvest/repayAllInvestedforShare"
    var dataTableUserUrl = baseUrlApi +  "/users/dataTableUsers"
	var updateUserStatus = baseUrlApi +  "/users/udpateStatus"
	var dataTableAnnounUrl = baseUrlApi +  "/announcements/dataTable"
	var insertAnnounUrl = baseUrlApi +  "/announcements/add"
    var deleteAnnounUrl = baseUrlApi +  "/announcements/delete/"
    var readAnnounUrl = baseUrlApi +  "/announcements/annoncebyid/"
    var updateAnnounUrl = baseUrlApi +  "/announcements/update/"
   	var dataTableInfluencerUrl = baseUrlApi +  "/influencers/dataTable"
    var insertInfluencerUrl = baseUrlApi +  "/influencers/add"
	var readInfluencerUrl = baseUrlApi +  "/influencers/influencerbyid/"
	var updateInfluencerUrl = baseUrlApi +  "/influencers/update/"
	var deleteInfluencerUrl = baseUrlApi +  "/influencers/delete/"
	var dataTablePartnerUrl = baseUrlApi +  "/partners/dataTable"
	var insertPartnerUrl = baseUrlApi +  "/partners/add"
    var readPartnerUrl = baseUrlApi +  "/partners/read/"
    var updatePartnerUrl = baseUrlApi +  "/partners/update/"
	 var deletePartnerUrl = baseUrlApi +  "/partners/delete/"
	var dataTableSettingUrl = baseUrlApi +  "/settings/dataTable"
    var insertSettingUrl = baseUrlApi +  "/settings/add"
	var readSettingUrl = baseUrlApi +  "/settings/read/"
	var updateSettingUrl = baseUrlApi +  "/settings/update/"
    var deleteSettingUrl = baseUrlApi +  "/settings/delete/"
	var readSettingGroupUrl = baseUrlApi +  "/settings/readGroup"
	var dataTableAuditUrl = baseUrlApi +  "/audit/dataTable"
	var readAuditEntityGroupUrl = baseUrlApi +  "/audit/readGroupEntity"
    var dataTableActorUrl = baseUrlApi + "/movie-person/dataTable"
    var readactorRolesUrl = baseUrlApi + "/movie-person-role/allRole";
    var insertActorUrl = baseUrlApi +  "/movie-person/add"
    var readActorUrl = baseUrlApi +  "/movie-person/read/"
	var updateActorUrl = baseUrlApi +  "/movie-person/update/"
	var deleteActorUrl = baseUrlApi +  "/movie-person/delete/"
	var dashBoadReadUrl = baseUrlApi + "/dashboard/readDashBoard"
	var dashBoardChartUrl = baseUrlApi + "/dashboard/dashBoardChart"







	





	
		
		











	

	 
	 
	 


	
    let currentTable;
	let idNameMovieStatusMap = {};
	let idNameMovieTypeMap = {};
	let movieLanuguageList = [];
	
	let  languageMap = 	[];
	let  actorRolelist = [];

    function loadSection(section) {
	
	console.log(section);
	if (Object.keys(idNameMovieStatusMap).length === 0) {
	 sendAjaxRequest(readMovieStatusUrl, "GET", getAppHeaer(), null,readMovieCallBack );
	 }
	 if (Object.keys(idNameMovieTypeMap).length === 0) {
	 	 sendAjaxRequest(readMovieTypeUrl, "GET", getAppHeaer(), null,readMovieTypeCallBack );

	 }
        if (!movieLanuguageList || movieLanuguageList.length === 0) {
	        sendAjaxRequest(readMovLanguageUrl, "GET", getAppHeaer(), null,readLanguageCallBack );

	 }
	
      const sections = ['dashboard', 'movies', 'actors', 'roles', 'users', 
	  'investments', 'reports', 'announcements', 'payouts', 'settings',
	  'offerPromotion','promotiontypes','promotionrewards','offers','promocodes',
	  'aduit'];
      sections.forEach(id => {
        document.getElementById(`${id}-section`).style.display = 'none';
		document.getElementById(`${id}-section`).innerHTML = "";
      });
      document.getElementById(`${section}-section`).style.display = 'block';
	  
	  
	  document.getElementById("mainLoadContent").innerHTML = "";
	  
	  var pageName = section +"-section.html";
	  var currId = "#"+section +"-section";
	  console.log(currId);
	  	  console.log(pageName);
		  
	   currId = "#" + "mainLoadContent";	  
		  

      if($(currId).children().length === 0)
	      {
		  $(currId).load(pageName, function () {
		  
		  if(section == 'dashboard')
		      loadDashBoardDetails();
		  if(section == 'movies')
              loadMovieSection();
          if(section == 'announcements')
                 loadAnnoncementSection();
          if(section == 'reports')
		     renderReportCharts();
		  if(section == 'users')
		     loadUserSection();
		  if(section == 'actors')
	         loadActorSection();	
          if(section == 'offerPromotion')
	         loadOfferPromotionSection();
          if(section == 'promotiontypes')
		     loadPromotiontypes();
          if(section == 'promotionrewards')
		     loadPromotiontReward();
          if(section == 'offers')
		     loadOfferSection();
         if(section == 'promocodes')
		     loadPromoCodeType();
		  if(section == 'investments')
	          loadInvestSection();
		  if(section == 'payouts')
	          loadPayoutSection();	  
		  if(section == 'settings')
	          loadSettingSection();	  
		  if(section == 'aduit')
	          loadAduitSection();		  
			  
			  
			  
			 
		  });
		  
		  		 
		  
           }
	 
	  // Clear existing highlights
  $('.sidebar .nav-link').removeClass('active');

  // Highlight the matching menu item
  $(`.sidebar .nav-link[data-section="${section}"]`).addClass('active');



  // Highlight the matching menu item
	  $('.sidebar .nav-link').each(function () {
    const linkText = $(this).text().trim().toLowerCase();
    if (linkText.includes(section.toLowerCase())) {
	console.log("test"+section);
      $(this).addClass('active');
    }
  });

  
    }

function loadOfferPromotionSection()
{

}
	
const readMovieTypeCallBack = function (response) {
  if(response != null)
  {
  items = response.result;
   if (Array.isArray(items)) {
  for (let i = 0; i < items.length; i++) {
    const item = items[i];
    idNameMovieTypeMap[item.id] = item.name;
  }
  }
  }
  
};

function getKeyValueMapIdName(items)
{
var idNameMapx = {};
  if (Array.isArray(items)) {
  
  for(let i = 0; i < items.length; i++) {

    const item = items[i];

    idNameMapx[item.id] = item.name;
  }
  
  }
  
  
  return idNameMapx;
 }



function convertMapToArray(idNameMap)
{

const idNameArray = [];

for (let key in idNameMap) {
  if (idNameMap.hasOwnProperty(key)) {
    idNameArray.push({
      id: parseInt(key),
      name: idNameMap[key]
    });
  }
}

return idNameArray;
}

const readLanguageCallBack =   function (response) {


  if(response != null)
  {
	if(response.status == "success")
	{
	   movieLanuguageList = response.result;


	   		 languageMap = getKeyValueMapIdName(movieLanuguageList);


	 } 
  }
  
  
}; 	
	function populateLanguageSelect(selectId, languageList,selectType) {
  const select = document.getElementById(selectId);
  console.log("selectId" + selectId);
  
  select.innerHTML = ""; // Clear previous options

  // Add default "All Languages" option
  const defaultOption = document.createElement("option");
  if(selectType == "language")
  {
  defaultOption.value = "";
  defaultOption.text = "🌐 All Languages";
  select.appendChild(defaultOption);
  }
  else
  {
  defaultOption.value = "";
  defaultOption.text = "Please select";
  defaultOption.disabled = true;
defaultOption.selected = true;
  select.appendChild(defaultOption);
  }


  // Add languages from array
  
  
   languageList.forEach(lang => {
    const option = document.createElement("option");
	
	 if(selectType == "language")
  {
    option.value = lang.id	;
    option.text = `${lang.name} (${lang.nativeScript})`;
    select.appendChild(option);
	}
	else if(selectType == "addlanguage")
  {
    option.value = lang.id;
    option.text = `${lang.name} (${lang.nativeScript})`;
    select.appendChild(option);
	}
	else
	{
	option.value = lang.id;
    option.text = lang.name;
    select.appendChild(option);
	}
  });
  
}
	
const readMovieCallBack = function (response) {
  console.log("Response:", response);
  if(response != null)
  {
  items = response.result;
   if (Array.isArray(items)) {
  for (let i = 0; i < items.length; i++) {
    const item = items[i];
    idNameMovieStatusMap[item.id] = item.name;
  }
  }
  }
  
};
 
	function getValueFromMap(mabObj,keyToFind)
	{
	if (Object.keys(mabObj).length === 0) {
  	   return ""+keyToFind;
} else {
  const value = mabObj[keyToFind];

if (value !== undefined) {
  return value;
} else {
  	   return ""+keyToFind;

}
  
}
	
	}
	
	
	function sendAjaxRequest(url, method, headers, body, onSuccess) {
  $.ajax({
    url: url,
    type: method.toUpperCase(),
    contentType: 'application/json',
    headers: headers || {},
    data: method.toUpperCase() === 'GET' ? null : JSON.stringify(body),
    success: function (response) {
      if (typeof onSuccess === 'function') {
        onSuccess(response);
      } else {
        console.log("✅ Success:", response);
      }
    },
    error: function (xhr, status, error) {
      
        alert("❌ Error: " + (xhr.responseText || error));
      
    }
  });
}

	
	
	
	
	
	
	
	
	
	
	
	
	
	let actorTable;
  let actorModal;

function loadActorSection()
{

  
    actorTable = $('#actorTable').DataTable({
	stripeClasses: [],

      pageLength: 10,
	  lengthChange: false
	  
    });

    $('#actorSearch').on('input', function () {
      actorTable.search(this.value).draw();
    });

  
   

}

	function loadUserSection()
	{
	
	const table = $('#userTable').DataTable({
      pageLength: 5
    });

    $('#userSearch').on('input', function () {
      table.search(this.value).draw();
    });
	}
	
	
	function formatDate(dateStr) {
    if (!dateStr) return 'N/A';
    const d = new Date(dateStr);
    return isNaN(d) ? 'Invalid Date' : d.toLocaleDateString();
  }
  function getAppHeaer()
  {
  
  
      var headerObj = {};
	  headerObj.deviceId = 'xxx';
	  headerObj.phoneNumber = 999;
	   headerObj.accessToken = 'xdfsdf';
  
       /*   {
    
	           'deviceId' : 'xxx',
			   'phoneNumber' : 999,
			   'accessToken' : 'xdfsdf'
          }*/
		  
		  return headerObj;
  
  }
  
  function enableCheckboxSelectAll(tableId) {
  const $table = $('#' + tableId);
  console.log("button clicked");
  const $selectAll = $table.find('thead input[type="checkbox"].select-all');

  // Handle header checkbox click
  $selectAll.on('change', function () {
    console.log("header checkbox clicked");
    const isChecked = $(this).prop('checked');
    $table.find('tbody input[type="checkbox"].row-checkbox').prop('checked', isChecked);
  });

  // Handle individual row checkbox click
  $table.on('change', 'tbody input[type="checkbox"].row-checkbox', function () {
    const total = $table.find('tbody input[type="checkbox"].row-checkbox').length;
    const checked = $table.find('tbody input[type="checkbox"].row-checkbox:checked').length;
    $selectAll.prop('checked', total === checked);
  });
}
  
	
	
function formatDate(value) {
  if (!value) return 'N/A';
  const date = new Date(value);
  return date.toLocaleDateString('en-IN', {
    day: '2-digit', month: 'short', year: 'numeric'
  });
}


function updateSelectedActor()
{


}

function openDropDownWithCallBack(modalId,page,onSuccess)
{


    $("#modalContainer").empty();

    $('#modalContainer').load(page, function () {
      $(modalId).modal('show');
	  onSuccess();
    });
  
  



}

var  openShareTypeWinCallBack = function ()
{
console.log("comming inside");
$("#movieNameHead").text(currentMovieName);

loadShareTypes(currentCastMovId);



}

function loadShareTypes(movieId) {

totalShares  = currentMovieShare ;
$("#totalShares").text(totalShares); 
$("#pricePerShare").val(currentMoviePerShare);
$("#editUnallocated").text(totalShares); 
	
  $.ajax({
    url: readShareTypeByMovIdUrl +movieId,
    type: 'GET',
	headers: getAppHeaer(),

    success: function(response) {
      const tbody = $('#shareTypeTableBody');
      tbody.empty();
       data = response.result;
      if (data.length === 0) {
        tbody.append('<tr><td colspan="9" class="text-center">No share types found</td></tr>');
        return;
      }
     totalSoldShare = 0;
	 totalAllocatedShare = 0;
	 totalPlatformCommission = 0;
	 totalProfitCommission = 0;
	 isBudgetDone = false;
	 sharePerAmount = 0;
      data.forEach(item => {
	  
	  if(!isBudgetDone)
	  {
		 isBudgetDone = true;
		 sharePerAmount = item.perShareAmount
		 }
  const commission = `${item.companyCommissionPercent}% / ${item.profitCommissionPercent}%`;
  const remainShareType = item.numberOfShares - item.soldShare ;
  totalSoldShare = totalSoldShare +  item.soldShare;
  totalAllocatedShare = totalAllocatedShare +item.numberOfShares ;
  totalPlatformCommission = totalPlatformCommission + item.companyCommission;
  totalProfitCommission = totalProfitCommission + item.companyProfitCommission;
  console.log("remmain " +remainShareType);
  const shares = `${item.numberOfShares}/ ${item.soldShare} / ${remainShareType} `;
  const earned = `₹${item.companyCommission} / ₹${item.companyProfitCommission}`; 
  const active = item.isActive ? '✅' : '❌';

  const $row = $("<tr></tr>");
  $row.append(`<td>${getCategoryName(item.categoryId)}</td>`);
  $row.append(`<td>${formatDateTime(item.startDate)}</td>`);
  $row.append(`<td>${formatDateTime(item.endDate)}</td>`);
  $row.append(`<td>₹${item.pricePerShare}</td>`);
  $row.append(`<td>${commission}</td>`);
  $row.append(`<td>${shares}</td>`);
  $row.append(`<td>${earned}</td>`);
  $row.append(`<td>${active}</td>`);

  const $editBtn = $(`<button class="btn btn-sm btn-warning">✏️</button>`);
  $editBtn.on("click", () => editShareType(item));

  const $deleteBtn = $(`<button class="btn btn-sm btn-danger">🗑️</button>`);
  $deleteBtn.on("click", () => deleteShareType(item.id));

  const $actionTd = $("<td></td>").append($editBtn, " ", $deleteBtn);
  $row.append($actionTd);

  tbody.append($row);
});

var totalRemaing = totalAllocatedShare - totalSoldShare;
$("#allocatedShares").text(totalAllocatedShare);
$("#soldShares").text(totalSoldShare);
$("#remainingShares").text(totalRemaing);
$("#earnedCompany").text(totalPlatformCommission);
$("#earnedProfit").text(totalProfitCommission);  
//$('#pricePerShare').val(sharePerAmount);

unsoldShare = 0;
unAllocated = 0;
if(totalShares > 0)
{
        unsoldShare = totalShares - totalSoldShare;
		unAllocated = totalShares - totalAllocatedShare;
}

$("#unsoldShares").text(unsoldShare); 
$("#unallocatedShares").text(unAllocated); 
$("#editUnallocated").text(unAllocated); 



    },
    error: function() {
      alert('❌ Failed to load share types');
    }
  });
}

// 🔧 Helper to map category ID to name
function getCategoryName(categoryId) {
  const categories = {
    1: "Normal",
    2: "Premium",
    3: "Trailer Release",
	4: "Day Before Release"
  };
  return categories[categoryId] || `Category #${categoryId}`;
}

function viewMovie(rowId)
{

openDropDown("#movieDetailPanel","movieDetailPanel.html");
sendAjaxRequest(readMovSummaryByIdURl+rowId, "GET", getAppHeaer(), null,movieDetailSumIDCallback );



}
	var movieDetailSumIDCallback = function (response)
	{
        console.log("movieDetailSumIDCallback" + response);	
		console.log(response);
		if(response != null)
		{
		  if(response.status == "success")
		  {
		     var data = response.result;
			 $("#movieTitle").text(data.title);
		     $("#movieCast").text(data.actorDetails);
			 $("#movieType").text(data.movieType);
			 $("#movieStatus").text( data.status);
			 $("#trailerDate").text( data.trailerDate);
			 $("#releaseDate").text( data.releaseDate);
			 $("#movieAmount").text( data.budget);
			 $("#collectedAmount").text( data.investedAmount);
			 var remaining = data.budget - data.investedAmount;
			 $("#pendingAmount").text(remaining);
			 $("#perShareAmount").text(data.perShareAmount);
             $("#moviePoster").attr("src", returnEmptyForNull(data.posterUrl));

			 
		  
		  }
		
		
		}
	
	}
	function returnEmptyForNull(inputx)
	{
	  return  inputx == null ? "" :inputx;
	
	}
currentMovieName = "";
currentMovieShare = 0;
currentMoviePerShare = 0;
function activateDayBefore(movId,movName,totalShareCount,perShare)
{
currentCastMovId = movId;
currentMovieName = movName;
currentMovieShare = totalShareCount; 
currentMoviePerShare = perShare;     
     openDropDownWithCallBack("#shareTypeModal","share-type-modal.html",openShareTypeWinCallBack);



}
var currentCastMovId ;
var currentCastMovName;

var castingCallBack = function()
{
   
$('#castingMovieId').val(currentCastMovId);
  $('#castingMovieTitle').text(currentCastMovName);
  $('#roleInMovie').val('');
  $('#actorSelect').val('');
  $('#castingTableBody').empty(); // clear old data

  // Optionally fetch existing cast from backend
  //fetchCastList(movieId);
  if (movieLanuguageList != null && movieLanuguageList.length > 0) {
	  	       populateLanguageSelect("castingLang", movieLanuguageList,"addlanguage");
  }
  
  if (actorRolelist != null && actorRolelist.length > 0) {
	  	       populateLanguageSelect("roleInMovieSelect", actorRolelist,"");
  }
  else
  {
     	 
   sendAjaxRequest(readMovieRolesUrl, "GET", getAppHeaer(), null,castingRoleFun );
  
  }
     sendAjaxRequest(readActorInMovByMovIdUrl+currentCastMovId, "GET", getAppHeaer(), null,drawdrawActorRoleMovTableFun );

  
  $('#castingModal').modal('show');

}

var castingRoleFun = function (data)
{

if(data.status === "success")
   {
     console.log("castingRoleFun");
	 if(data.result != null )
	 {
	      var keyMap = getKeyValueMapIdName(data.result)
		  var arrayObj = convertMapToArray(keyMap);
		  actorRolelist = arrayObj;
	  	       populateLanguageSelect("roleInMovieSelect", actorRolelist,"");

	 }
   
      
   }

}


var casttingLangSelectFun = function (data)
{
   if(data.status === "success")
   {
	 if(data.result != null )
	 {
	       var keyMap = getKeyValueMapIdName(data.result)
		   var arrayObj = convertMapToArray(keyMap);
	       populateLanguageSelect("actorSelect", arrayObj,"");

	 }
   
      
   }



}


function loadActorsByLanguage(language) {
  if (!language) {
    $('#actorSelect').html('<option value="">Select Actor</option>');
    return;
  }
  
  	 sendAjaxRequest(readActorsBylanIdUrl+language, "GET", getAppHeaer(), null,casttingLangSelectFun );


 
}

var listActorInMovie = function listMovieInActorCallBack(data)
{
  if(data.success === "success")
  {
  
     drawdrawActorRoleMovTableFun(data);
  
  }


}

var addRoleInMovieFun = function(response)
{

 if(response.status === "success")
 {
    
	     sendAjaxRequest(readActorInMovByMovIdUrl+currentCastMovId, "GET", getAppHeaer(), null,drawdrawActorRoleMovTableFun );

    //drawdrawActorRoleMovTableFun(response);

 }
 else {
        if(response.status === "failure")
		    alert("❌ Failed to save movie. " + response.message);

 
 
 }



}

var drawdrawActorRoleMovTableFun = function drawActorRoleMovieTable(response)
{
     if(response.status == "success")
	 {
	 $('#castingTableBody').empty();
      response.result.forEach(function(record, index) {
                const rowCount = index + 1;  // Index starts from 0, so add 1 for row number
                const roleName =record.roleName; // You'll need to fetch or map the role name
                const actorName = record.actorName; // Similarly, map actorId to actorName
                const id = record.id;
                // Create a new row
                const newRow = `
                    <tr>
                        <td>${rowCount}</td>
                        <td>${roleName}</td>
                        <td>${actorName}</td>
                        <td>
                            <span class="text-primary" style="cursor:pointer;" onclick="editCast(${id})">🖉</span>
                            <span class="text-danger ms-2" style="cursor:pointer;" onclick="deleteCast(${id})">🗑</span>
                        </td>
                    </tr>
                `;
                // Append the new row to the table body
                $('#castingTableBody').append(newRow);
            });
   

  // Reset fields
  $('#roleInMovie').val('');
  $('#actorSelect').val('');
  $('#castingLang').val('');
}
}

function addCastEntry() {
  const role = $('#roleInMovieSelect').val();
  const actorId = $('#actorSelect').val();
  const actorName = $('#actorSelect option:selected').text();
  const roleName = $('#roleInMovieSelect option:selected').text();
  const language = $('#castingLang').val();
  console.log("lang selected " + language);

  // Hide all previous error messages
  $('.error-message').hide();

  // Check if all fields are selected
  let isValid = true;
  
  if (!language) {
    $('#languageError').show();
    isValid = false;
  }
  if (!role) {
    $('#roleError').show();
    isValid = false;
  }
  if (!actorId) {
    $('#actorError').show();
    isValid = false;
  }

  // Stop if any field is invalid
  if (!isValid) {
    return;
  }
 
     var input = {};
	 input.movieId = currentCastMovId;
	 input.actorId    = parseInt(actorId); // 123
	 input.roleMovieId =parseInt(role) ;
	 input.id = 0;
	 console.log("casting save ");
	 console.log(input);
  	 sendAjaxRequest(addActorInMovieUrl, "POST", getAppHeaer(), input , addRoleInMovieFun );
 
  
  
  

  
}


function editCast(castId) {
}

function deleteCast(castId) {
console.log("delte id" + castId);
const confirmDelete = confirm("Are you sure you want to delete this cast record?");
    
    if (confirmDelete) {
        console.log("Delete confirmed. ID:", castId);
		sendAjaxRequest(deleteActorInMovieUrl+castId, "GET", getAppHeaer(), null , addRoleInMovieFun );


        // TODO: Call your delete AJAX function here
        // Example:
        // sendAjaxRequest(deleteUrl, "DELETE", getAppHeaer(), JSON.stringify({ id: castId }), callbackFn);
    } else {
        console.log("Delete cancelled.");
    }
  
}

function manageCast(movieId, movieName) {

currentCastMovId = movieId;
currentCastMovName =movieName;


     openDropDownWithCallBack("#castingModal","castingModal.html",castingCallBack);
  
}

var setMovieAddSelect = function ()
{
	  if (movieLanuguageList != null && movieLanuguageList.length > 0) {
	  	       populateLanguageSelect("mLanguageSelect", movieLanuguageList,"addlanguage");
			   }
			   

		if (Object.keys(idNameMovieTypeMap).length > 0) { 
                 var arrayObj = convertMapToArray(idNameMovieTypeMap);
	  	       populateLanguageSelect("addmovieTypeSelect", arrayObj,"");
			   }	
			   
			  if (Object.keys(idNameMovieStatusMap).length > 0) { 
			                    var arrayObj = convertMapToArray(idNameMovieStatusMap);

	  	       populateLanguageSelect("addstatusSelect", arrayObj,"");
			   }	
    			   
			   
 
}


  function closeMoviePanel() {
   $("#movieDetailPanel").fadeOut(200, function () {
    $(this).css("display", "none");
  });
}
	
function openDropDown(modalId,page)
{


console.log("comming inside");
    $("#modalContainer").empty();

    $('#modalContainer').load(page, function () {
	 console.log("comming inside");
      $(modalId).modal('show');
    });
  
  



}

	
  $(document).ready(function () {
 
   // Investment Trend Chart
   //showPopupLoader();
   $(document).ready(function () {
  $('.sidebar').hover(
    function () {
      $(this).addClass('expanded');
      $('.main-content').addClass('shifted');
    },
    function () {
      $(this).removeClass('expanded');
      $('.main-content').removeClass('shifted');
    }
  );
  
	
  
});

   
   loadSection('dashboard');
    
 
  });
  
  function showPopupLoader() {
  $('#loadingPopup').show();
}

function hidePopupLoader() {
  $('#loadingPopup').hide();
}
  

// annoncement

  let announcements = [
    { id: 1, title: "New Movie: Sky Flame", date: "2025-06-10", status: "Active" },
    { id: 2, title: "Server Maintenance", date: "2025-06-05", status: "Inactive" }
  ];

  let announcementTable;

  function renderAnnouncementsTable() {
    const tbody = $('#announcementTable tbody');
    tbody.empty();

    announcements.forEach((a, i) => {
      tbody.append(`
        <tr>
          <td>${i + 1}</td>
          <td>${a.title}</td>
          <td>${a.date}</td>
          <td><span class="badge ${a.status === 'Active' ? 'bg-success' : 'bg-secondary'}">${a.status}</span></td>
          <td>
            <button class="btn btn-sm btn-primary" onclick="editAnnouncement(${a.id})">Edit</button>
            <button class="btn btn-sm btn-danger" onclick="deleteAnnouncement(${a.id})">Delete</button>
          </td>
        </tr>
      `);
    });

    if ($.fn.DataTable.isDataTable('#announcementTable')) {
      $('#announcementTable').DataTable().destroy(); // reinit
    }

    $('#announcementTable').DataTable({
      pageLength: 5,
      ordering: true,
      stripeClasses: ['table-light', ''],
      language: {
        searchPlaceholder: "Search announcement..."
      }
    });
  }

  function openAnnouncementModal() {
  
  openDropDown('#announcementModal','add-annoncement-modal.html');
  
  
    $('#announcementId').val('');
    $('#announcementTitle').val('');
    $('#announcementMessage').val('');
    $('#announcementDate').val(new Date().toISOString().split('T')[0]);
    $('#announcementStatus').val('Active');
    $('#announcementModal').addClass('show');
  }

  function closeAnnouncementModal() {
  $('#modalContainer').hide(); // removes modal HTML

  }

  function saveAnnouncement() {
    const id = $('#announcementId').val();
    const title = $('#announcementTitle').val();
    const date = $('#announcementDate').val();
    const status = $('#announcementStatus').val();

    if (id) {
      const index = announcements.findIndex(a => a.id == id);
      announcements[index] = { id: Number(id), title, date, status };
    } else {
      const newId = announcements.length ? announcements[announcements.length - 1].id + 1 : 1;
      announcements.push({ id: newId, title, date, status });
    }

    closeAnnouncementModal();
    renderAnnouncementsTable();
  }

  function editAnnouncement(id) {
    const a = announcements.find(a => a.id == id);
    $('#announcementId').val(a.id);
    $('#announcementTitle').val(a.title);
    $('#announcementDate').val(a.date);
    $('#announcementStatus').val(a.status);
    $('#announcementModal').addClass('show');
  }

  function deleteAnnouncement(id) {
    if (confirm("Are you sure you want to delete this?")) {
      announcements = announcements.filter(a => a.id != id);
      renderAnnouncementsTable();
    }
  }

// reports
 

  function renderReportCharts() {
  
    new Chart(document.getElementById('reportinvestmentChart'), {
      type: 'line',
      data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [{
          label: 'Monthly Investments',
          data: [15, 25, 35, 28, 40, 22],
          borderColor: '#FFD700',
          backgroundColor: 'rgba(255, 215, 0, 0.2)',
          tension: 0.4
        }]
      }
    });

    new Chart(document.getElementById('reportsuserGrowthChart'), {
      type: 'bar',
      data: {
        labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [{
          label: 'New Users',
          data: [300, 400, 520, 600, 750, 850],
          backgroundColor: '#FFD700'
        }]
      }
    });
  }

  function exportCSV() {
    alert("CSV Export (hook your backend later)");
  }

  function exportPDF() {
    alert("PDF Export (you can integrate html2pdf or jsPDF)");
  }

  

  
  function openActorModal() {
      openDropDown('#actorModal','add_actor_modal.html');
	      $('#actorForm')[0].reset();

  }

  function closeActorModal() {
    actorModal.hide();
  }

  function saveActor() {
    const values = $('#actorForm').serializeArray().map(i => i.value);
    const newRow = `
      <tr>
        <td>${values[0]}</td>
        <td>${values[1]}</td>
        <td>${values[2]}</td>
        <td>${values[3]}</td>
        <td>${values[4]}</td>
        <td>${values[5]}</td>
        <td><img src="${values[6]}" alt="Actor" width="40"></td>
      </tr>`;
    $('#actorTable tbody').append(newRow);
    actorTable.row.add($(newRow)).draw();
    closeActorModal();
  }
  
  
  function enableRowSelected(checkbox) {
  const $checkbox = $(checkbox);
  const $row = $checkbox.closest('tr');

  if ($checkbox.is(':checked')) {
    $row.addClass('row_selected');
  } else {
    $row.removeClass('row_selected');
  }
  
  }
  
  
 





function closeModelWindowById(modalId)
{
  const modalElement = document.getElementById(modalId);
  const modalInstance = bootstrap.Modal.getInstance(modalElement);
  if (modalInstance) {
    modalInstance.hide();
  }
  // Cleanup fallback (optional)
  document.body.classList.remove('modal-open');
  document.querySelectorAll('.modal-backdrop').forEach(el => el.remove());
	
}
function formatDateTime(dateString) {
   var txt = formatNA(dateString);
   if(txt == "N/A")
      return txt;

  const date = new Date(dateString);

  const pad = n => (n < 10 ? '0' + n : n);

  const day = pad(date.getDate());
  const month = pad(date.getMonth() + 1);
  const year = date.getFullYear();

  const hours = pad(date.getHours());
  const minutes = pad(date.getMinutes());

  return `${day}-${month}-${year} ${hours}:${minutes}`;
}

function formatDateTimeFromTimeStamp(dateString) {
  const date = new Date(dateString);

  const pad = (n) => n.toString().padStart(2, '0');

  const year = date.getFullYear();
  const month = pad(date.getMonth() + 1);
  const day = pad(date.getDate());
  const hours = pad(date.getHours());
  const minutes = pad(date.getMinutes());

  return `${year}-${month}-${day}T${hours}:${minutes}`;
}

function toSqlTimestampWithMillis(datetimeLocal) {
  if (!datetimeLocal) return null;

  const date = new Date(datetimeLocal);
  const pad = (n, len = 2) => n.toString().padStart(len, '0');

  const year = date.getFullYear();
  const month = pad(date.getMonth() + 1);
  const day = pad(date.getDate());
  const hours = pad(date.getHours());
  const minutes = pad(date.getMinutes());
  const seconds = pad(date.getSeconds());
  const millis = pad(date.getMilliseconds(), 3);

  return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}.${millis}`;
}


function extractYouTubeVideoID(url) {
  const regExp = /(?:youtube\.com.*(?:\?v=|\/embed\/)|youtu\.be\/)([a-zA-Z0-9_-]+)/;
  const match = url.match(regExp);
  return match ? match[1] : null;
}

function toFullSqlTimestamp(value) {
  if (!value) return "";
  if (value.length === 16) value += ":00"; // Add seconds
  return value.replace("T", " ") + ".000"; // Add space and milliseconds
}

function populateSelectBox( selectId,list, valueField, textField) {
  const $select = $('#' + selectId);
  $select.empty(); // Clear existing options

  // Add the first disabled option
  $select.append($('<option>', {
    value: '',
    text: '-- Select --',
    disabled: true,
    selected: true
  }));

  // Append options from object list
  list.forEach(item => {
    $select.append($('<option>', {
      value: item[valueField],
      text: item[textField]
    }));
  });
}
function populateSelectBoxFirstOptAll( selectId,list, valueField, textField) {
  const $select = $('#' + selectId);
  $select.empty(); // Clear existing options

  // Add the first disabled option
  $select.append($('<option>', {
    value: '',
    text: '-- All --'
  }));

  // Append options from object list
  list.forEach(item => {
    $select.append($('<option>', {
      value: item[valueField],
      text: item[textField]
    }));
  });
}


function readFinalResult(response)
{

if(response != null)
  { 
  if(response.status == "success")
	{
	   if(response.message == "success")
	   {
             return response.result;
	   }
	   else 
	       alert(" error  here ",	response.message); 

     }
	 else
	 alert(response.message);
   }	

  return null;

}

function closeModal(id)
{
 $("#"+id).hide();
   $('.modal-backdrop').remove(); // Cleanup in case it lingers


}

function closeModalAndReloadDataTable(response,modalId,tableId)
{
if(response.status == "success")
	{
	
	   if(response.message == "success")
	   {
	      $(modalId).hide();
		 
		 const table = $(tableId).DataTable();
       if (table) {
        table.ajax.reload(null, false); // false keeps the current pagination
        }

	   }
	 } 
	 else
	 {
	   if(response.status === "failure")
		    alert("❌ Failed to save movie. " + response.message);
	 
	 }
 

}

function clearAllFormInsideDiv(divId)
{

$(divId).find('input[type="text"], input[type="number"], input[type="checkbox"], select').each(function() {
    $(this).val('').prop('checked', false); // Clear text and number inputs, uncheck checkboxes
  });

}
function isSelectBoxNoOption(inpid)
{
if ($( inpid +' option').length === 0) {
     return true;
} else {
      return false;
}

}

function formatRupee(amount) {
    if (isNaN(amount)) return "₹ 0";
    
    return '₹ ' + Number(amount)
        .toLocaleString('en-IN', {
            maximumFractionDigits: 2,
            minimumFractionDigits: 0
        });
}


function formatShares(count) {
    if (isNaN(count)) return "0 shares";
    return Number(count).toLocaleString('en-IN') + ' shares';
}

function formatPhoneOnly(number) {
    const clean = number.toString().replace(/\D/g, '');
    return `📞 ${clean}`;
}

function toTitleCase(name) {

  return name
    .toLowerCase()
    .split(' ')
    .filter(word => word.trim() !== '')
    .map(word => word[0].toUpperCase() + word.slice(1))
    .join(' ');

}

function calculateSharePrice(totalAmount, numberOfShares) {
    // Validate if inputs are valid numbers and greater than zero
    if (isNaN(totalAmount) || isNaN(numberOfShares) || totalAmount <= 0 || numberOfShares <= 0) {
        return "₹ 0";
    }

    // Calculate price per share
    const pricePerShare = totalAmount / numberOfShares;
    
    // Return the result
    return `₹ ${pricePerShare}`;  // Return formatted price per share (2 decimal places)
}


function renderStatus(status) {
    // Convert to lowercase to handle case insensitivity
    status = status.toLowerCase();

    let color = '';
    let displayText = '';

    // Determine color based on status
    switch (status) {
        case 'active':
            color = 'green';
            displayText = 'Active';
            break;
        case 'inactive':
            color = 'gray';
            displayText = 'Inactive';
            break;
        case 'expired':
            color = 'red';
            displayText = 'Expired';
            break;
        case 'paid':
            color = 'blue';
            displayText = 'Paid';
            break;
        case 'pending':
            color = 'orange';
            displayText = 'Pending';
            break;
        case 'cancel':
            color = 'purple';
            displayText = 'Cancel';
            break;
        default:
            color = 'black';  // Default color
            displayText = 'Unknown';
            break;
    }

    // Return the span with dynamic color and text
    return `<span style="color: ${color};">${displayText}</span>`;
}


function renderPayoutStatus(status, totalAmount = 0, paidAmount = 0) {
    if (status == null || paidAmount == null || paidAmount == 0)
	status = "pending";
    




    status = status.toLowerCase();

    let color = '';
    let displayText = '';
    let backgroundColor = '';
    let textColor = 'white';  // Default text color

    // Check for partial payment
    let partialPayment = false;
    if (totalAmount > 0 && paidAmount < totalAmount && status != "pending") {
        partialPayment = true;
		status = 'partial'
    }
	
    // Determine color and text based on status
    switch (status) {
        case 'pending':
            backgroundColor = '#ff9800';
            displayText = 'Pending';
            break;
        case 'paid':
            backgroundColor = '#4caf50';
            displayText = 'Paid';
            break;
        case 'failed':
            backgroundColor = '#f44336';
            displayText = 'Failed';
            break;
        case 'cancelled':
            backgroundColor = '#9c27b0';
            displayText = 'Cancelled';
            break;
        case 'processing':
            backgroundColor = '#2196f3';
            displayText = 'Processing';
            break;
        case 'completed':
            backgroundColor = '#673ab7';
            displayText = 'Completed';
            break;
        case 'refunded':
            backgroundColor = '#e91e63';
            displayText = 'Refunded';
            break;
		case 'partial':
             backgroundColor = '#ffeb3b';  // Yellow color for partial payment
             textColor = 'black';  // Black text for better contrast
            // displayText = `Partial(${paidAmount} / ${totalAmount})`;
			displayText = `Partial`;
             break;	
        default:
            backgroundColor = '#dcdcdc';
            textColor = 'black';
            displayText = 'Unknown';
            break;
    }

    // If partial payment, modify the text and background color
  

    // Return a span with rounded pill style
    return `<span style="
        display: inline-block;
        color: ${textColor};
        background-color: ${backgroundColor};
        padding: 3px 7px;
        border-radius: 999px;
        font-weight: 500;
        font-size: 0.85rem;
        text-transform: capitalize;
        min-width: 75px;
        text-align: center;
    ">${displayText}</span>`;
}


function checkValidNumber(input) {
    // Check if the input is a valid number
    if (typeof input === 'number' && !isNaN(input)) {
        return input;  // Return the number if valid
    } else if (input === null || input === '') {
        return 0;  // Return null if input is empty or null
    } else {
        return 0;  // Return 0 for invalid numbers or strings
    }
}

function renderPayoutStatusOld(status) {
    if (status == null) status = "pending";

    status = status.toLowerCase();

    let color = '';
    let displayText = '';
    let backgroundColor = '';
    let textColor = 'white';  // Default text color

    switch (status) {
        case 'pending':
            backgroundColor = '#ff9800';
            displayText = 'Pending';
            break;
        case 'paid':
            backgroundColor = '#4caf50';
            displayText = 'Paid';
            break;
        case 'failed':
            backgroundColor = '#f44336';
            displayText = 'Failed';
            break;
        case 'cancelled':
            backgroundColor = '#9c27b0';
            displayText = 'Cancelled';
            break;
        case 'processing':
            backgroundColor = '#2196f3';
            displayText = 'Processing';
            break;
        case 'completed':
            backgroundColor = '#673ab7';
            displayText = 'Completed';
            break;
        case 'refunded':
            backgroundColor = '#e91e63';
            displayText = 'Refunded';
            break;
	    case 'partial':
             backgroundColor = '#ffeb3b';  // Yellow color for partial payment
             textColor = 'black';  // Black text for better contrast
             displayText = 'Partial';  // Display partial paid text
             break;
			
        default:
            backgroundColor = '#dcdcdc';
            textColor = 'black';
            displayText = 'Unknown';
            break;
    }

    // Return a span with rounded pill style
    return `<span style="
        display: inline-block;
        color: ${textColor};
        background-color: ${backgroundColor};
        padding: 1px -7px;
        border-radius: 999px;
        font-weight: 500;
        font-size: 0.85rem;
        text-transform: capitalize;
        min-width: 73px;
        text-align: center;
    ">${displayText}</span>`;
}

function formatNA(value) {
    if (value === null || value === undefined || value === '') {
        return 'N/A';
    }
    return value;
}


function getPayOutStatus()
{
const paymentStatuses = [
    { id: 'PENDING', name: 'PENDING' },
    { id: 'PAID', name: 'PAID' },
    { id: 'FAILED', name: 'FAILED' },
    { id: 'CANCELLED', name: 'CANCELLED' },
    { id: 'PROCESSING', name: 'PROCESSING' },
    { id: 'COMPLETED', name: 'COMPLETED' },
    { id: 'REFUNDED', name: 'REFUNDED' },
    { id: 'AWAITING_CONFIRMATION', name: 'AWAITING_CONFIRMATION' },
    { id: 'UNDER_REVIEW', name: 'UNDER_REVIEW' },
    { id: 'ON_HOLD', name: 'ON_HOLD' },
    { id: 'IN_PROGRESS', name: 'IN_PROGRESS' }
];

return paymentStatuses;
}


function validateFieldValue(fieldId) {
  const field = document.getElementById(fieldId);
  const value = field.value.trim();
  const errorDiv = document.getElementById("error-" + fieldId);

  if (!value) {
    field.classList.remove("valid");
    field.classList.add("invalid");
    errorDiv.textContent = "This field is required";
    return false;
  } else {
    field.classList.remove("invalid");
    field.classList.add("valid");
    errorDiv.textContent = "";
    return true;
  }
}

function formatIndianLabel(input,spanId) {
    const label = document.getElementById(spanId);
    const value = parseInt(input.value);

    if (!value) {
      label.textContent = '';
      return;
    }

    let formatted = '';

    if (value >= 10000000) {
      formatted = (value / 10000000).toFixed(2).replace(/\.00$/, '') + ' Crore';
    } else if (value >= 100000) {
      formatted = (value / 100000).toFixed(2).replace(/\.00$/, '') + ' Lakh';
    } else if (value >= 1000) {
      formatted = (value / 1000).toFixed(2).replace(/\.00$/, '') + ' Thousand';
    } else {
      formatted = value.toString();
    }

    label.textContent = formatted;
  }
  function formatIndian(x) {
    if (x >= 10000000) {
      return (x / 10000000).toFixed(2).replace(/\.00$/, '') + ' crore';
    } else if (x >= 100000) {
      return (x / 100000).toFixed(2).replace(/\.00$/, '') + ' lakh';
    } else if (x >= 1000) {
      return (x / 1000).toFixed(2).replace(/\.00$/, '') + 'K';
    } else {
      return x.toString();
    }
  }
  
 function updateShares(inputId,butgetId,showId) {
    const budget = parseFloat(document.getElementById(butgetId).value);
    const sharePrice = parseFloat(document.getElementById(inputId).value);
    const outputDiv = document.getElementById(showId);

    if (!isNaN(budget) && !isNaN(sharePrice) && sharePrice > 0) {
      const numShares = Math.floor(budget / sharePrice);
      const formattedShares = formatIndian(numShares) + ' share(s)';
      outputDiv.innerText = formattedShares;
      outputDiv.style.display = 'inline-block';
    } else {
      outputDiv.style.display = 'none';
    }
  }





  </script>
  <style>
 
  </style>
</head>
<body style="background-color:white">

<div id="loadingPopup" style="display: none;">
  <div class="loading-popup-backdrop"></div>
  <div class="loading-popup-box">
    <div class="spinner-border text-warning" role="status"></div>
    <div class="loading-text mt-2">Loading, please wait...</div>
  </div>
</div>

<!-- Add Movie Modal -->
<div id="modalContainer"></div>





  <!-- Top Navbar -->
  <nav class="navbar navbar-dark bg-dark fixed-top px-3">
    <span class="navbar-brand">🎬 FilmBit Admin Panel</span>
    <a href="#" class="logout-btn">🔓 Logout</a>
  </nav>

  <!-- Sidebar -->
  <div class="sidebar pt-5">
    <ul class="nav flex-column">
      <li class="nav-item"><a class="nav-link" href="#" onclick="loadSection('dashboard')">📊 <span class="nav-text">Dashboard</span></a></li>
     <li class="nav-item">
    <a class="nav-link" href="#filmSubmenu" data-bs-toggle="collapse">
      🎬 <span class="nav-text">Film</span>
    </a>
    <ul class="collapse list-unstyled ps-3" id="filmSubmenu">
      <li><a class="nav-link" href="#" onclick="loadSection('movies')" data-section="movies">🎬 <span class="nav-text">Movies</span></a></li>
      <li><a class="nav-link" href="#" onclick="loadSection('actors')" data-section="actors">🧑 <span class="nav-text">Actors</span></a></li>
      <li><a class="nav-link" href="#" onclick="loadSection('roles')" data-section="roles">👥 <span class="nav-text">Role Play</span></a></li>
    </ul>
  </li>
  
       <li class="nav-item">
    <a class="nav-link" href="#financeSubmenu" data-bs-toggle="collapse">
      💰 <span class="nav-text">Finance</span>
    </a>
    <ul class="collapse list-unstyled ps-3" id="financeSubmenu">
<li class="nav-item"><a class="nav-link" href="#" onclick="loadSection('investments')" data-section="investments"> 💼<span class="nav-text">Investments</span></a></li>
      <li class="nav-item"><a class="nav-link" href="#" onclick="loadSection('payouts')" data-section="payouts">📤 <span class="nav-text">Payouts</span></a></li>

    </ul>
  </li>
      <li class="nav-item"><a class="nav-link" href="#" onclick="loadSection('users')" data-section="Users">👨‍💼 <span class="nav-text">Users</span></a></li>
	  <li class="nav-item"><a class="nav-link" href="#" onclick="loadSection('announcements')" data-section="Announcements">📣 <span class="nav-text">Announcements</span></a></li>
     
      
	  <li class="nav-item">
    <a class="nav-link" href="#offerPromotion" data-bs-toggle="collapse">
      📣<span class="nav-text">Offer & Promo</span>
    </a>
    <ul class="collapse list-unstyled ps-3" id="offerPromotion">
      <li><a class="nav-link" href="#" onclick="loadSection('promotiontypes')" data-section="promotiontypes">🎁<span class="nav-text"> Promo Types</span></a></li>
      <li><a class="nav-link" href="#" onclick="loadSection('promotionrewards')" data-section="promotionrewards">🏆 <span class="nav-text">Promo Rewards</span></a></li>
	  <li><a class="nav-link" href="#" onclick="loadSection('promocodes')" data-section="promocodes">🎫 <span class="nav-text">  Promo Codes</span></a></li>     
	 <li><a class="nav-link" href="#" onclick="loadSection('offers')" data-section="offers">🎟️ <span class="nav-text">Offers</span></a></li>

    </ul>
  </li>
	  
	  
 
    <li class="nav-item"><a class="nav-link" href="#" onclick="loadSection('aduit')" data-section="Aduit">📈  <span class="nav-text">Aduit</span></a></li>

	  <li class="nav-item"><a class="nav-link" href="#" onclick="loadSection('reports')" data-section="Reports">📈  <span class="nav-text">Reports</span></a></li>
      <li class="nav-item"><a class="nav-link" href="#" onclick="loadSection('settings')" data-section="Settings">⚙️ <span class="nav-text">Settings</span></a></li>
    </ul>
  </div>

  <!-- Main Content -->
  
  <div class="main-content">
    

    <div class="content-area">
	
	
	<div id="mainLoadContent" >  </div>
	
      <!-- Sections -->
   <div id="dashboard-section" style = ""></div>
   <div id = "movies-section"> </div>


      <div id="actors-section" style="display: none;"></div>
      <div id="roles-section" style="display: none;"></div>
      <div id="users-section" style="display: none;"></div>
      <div id="investments-section" style="display: none;"></div>
      <div id="reports-section" style="display: none;"></div>
      <div id="announcements-section" style="display: none;"></div>
      <div id="payouts-section" style="display: none;"></div>
      <div id="settings-section" style="display: none;"></div>
	  <div id="offerPromotion-section" style="display: none;"></div>
      <div id="promotiontypes-section" style="display: none;"></div>
      <div id="promotionrewards-section" style="display: none;"></div>
      <div id="offers-section" style="display: none;"></div>
      <div id="promocodes-section" style="display: none;"></div>
	  <div id="aduit-section" style="display: none;"></div>

	  
    </div>
  </div>


</body>
</html>
